# üß† YOLOv8 + BoT-SORT - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ª—é–¥–µ–π –Ω–∞ –≤–∏–¥–µ–æ

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç **–¥–µ—Ç–µ–∫—Ü–∏—é –∏ —Ç—Ä–µ–∫–∏–Ω–≥ –ª—é–¥–µ–π** –Ω–∞ –≤–∏–¥–µ–æ —Å –ø–æ–º–æ—â—å—é –º–æ–¥–µ–ª–∏ **YOLOv8** –∏ —Ç—Ä–µ–∫–µ—Ä–∞ **BoT-SORT**.  
–†–µ–∑—É–ª—å—Ç–∞—Ç - –Ω–æ–≤–æ–µ –≤–∏–¥–µ–æ, –≥–¥–µ –∫–∞–∂–¥—ã–π —á–µ–ª–æ–≤–µ–∫ –∏–º–µ–µ—Ç —Å–≤–æ–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID.

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ª—é–¥–µ–π –Ω–∞ –≤–∏–¥–µ–æ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏  
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ —Å –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º–∏ ID (BoT-SORT)  
- –ü–æ–¥—Å—á—ë—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ª—é–¥–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –∑–∞–º–µ—á–µ–Ω—ã –∏ –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ª—é–¥–µ–π  
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ FPS –∏ –Ω–æ–º–µ—Ä–∞ –∫–∞–¥—Ä–∞  

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
   
   ```bash
   project/
   ‚îú‚îÄ‚îÄ main.py                 # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (CLI)
   ‚îú‚îÄ‚îÄ human_detect.py         # –õ–æ–≥–∏–∫–∞ YOLO + BoT-SORT
   ‚îú‚îÄ‚îÄ input_video/
   ‚îÇ   ‚îî‚îÄ‚îÄ input.mp4           # –í–∏–¥–µ–æ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ (–ø—Ä–∏–º–µ—Ä)
   ‚îú‚îÄ‚îÄ outputs_video/
   ‚îÇ   ‚îî‚îÄ‚îÄ output.mp4          # –†–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏
   ‚îî‚îÄ‚îÄ requirements.txt        # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
   ```
---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
   ```bash
   git clone https://github.com/Zux1U/crowd_detection.git
   cd crowd_detection
   ```
2. C–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
   ```bash
   python -m venv .venv
   .venv\Scripts\activate #–î–ª—è Windows
   source .venv/bin/activate # –î–ª—è Mac/Linux
   ```
3.–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```bash
   pip install -r requirements.txt
   ```
–∏–ª–∏ –≤—Ä—É—á–Ω—É—é:
   ```bash
pip install --index-url https://download.pytorch.org/whl/cpu torch torchvision
pip install ultralytics opencv-python numpy lapx
   ```

## ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫
üîπ –í–∞—Ä–∏–∞–Ω—Ç 1 - –∑–∞–ø—É—Å–∫ –±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
   ```
   python main.py
   ```
üîπ –í–∞—Ä–∏–∞–Ω—Ç 2 - —É–∫–∞–∑–∞—Ç—å —Å–≤–æ–π –ø—É—Ç—å

–í—ã –º–æ–∂–µ—Ç–µ —è–≤–Ω–æ –∑–∞–¥–∞—Ç—å –≤—Ö–æ–¥–Ω–æ–π –∏ –≤—ã—Ö–æ–¥–Ω–æ–π –ø—É—Ç—å:
   ```
   python main.py --source "video.mp4" --save "result.mp4"
   ```
–ü—Ä–∏–º–µ—Ä:
   ```
   python main.py --source crowd.mp4 --save tracked_crowd.mp4
   ```
üß∞ –ê—Ä–≥—É–º–µ–Ω—Ç—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
–ê—Ä–≥—É–º–µ–Ω—Ç	–û–ø–∏—Å–∞–Ω–∏–µ	–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é
- --source	–ü—É—Ç—å –∫ –∏—Å—Ö–æ–¥–Ω–æ–º—É –≤–∏–¥–µ–æ
- --save	–ü—É—Ç—å –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
- --device	–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏–π (cpu, 0, 1, ‚Ä¶)

## üìä –û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –¥–µ—Ç–µ–∫—Ü–∏–∏

–î–ª—è –æ–±—ä–µ–∫—Ç–∏–≤–Ω–æ–π –æ—Ü–µ–Ω–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –¥–µ—Ç–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ª—é–¥–µ–π –±—ã–ª–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ –≤—Ä—É—á–Ω—É—é —Ä–∞–∑–º–µ—á–µ–Ω–Ω–∞—è –≤—ã–±–æ—Ä–∫–∞ –∏–∑ –∫–∞–¥—Ä–æ–≤ –≤–∏–¥–µ–æ. –†–∞–∑–º–µ—Ç–∫–∞ –≤–∫–ª—é—á–∞–ª–∞ –≤—Å–µ—Ö —É–≤–µ—Ä–µ–Ω–Ω–æ –≤–∏–¥–∏–º—ã—Ö –ª—é–¥–µ–π, –≤–∫–ª—é—á–∞—è —Ç–µ—Ö, —É –∫–æ–≥–æ –≤–∏–¥–Ω–∞ —Ç–æ–ª—å–∫–æ –≥–æ–ª–æ–≤–∞, —á—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∞–∫–∞–¥–µ–º–∏—á–µ—Å–∫–æ–π –ø—Ä–∞–∫—Ç–∏–∫–µ crowd-analysis.

–ú–µ—Ç—Ä–∏–∫–∏ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω—ã –ø–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º –ø—Ä–∞–≤–∏–ª–∞–º:
- IoU-–ø–æ—Ä–æ–≥ = 0.50 (COCO mAP@50)
- –∫–ª–∞—Å—Å –æ–±—ä–µ–∫—Ç–∞: person
- –∏–∑–º–µ–Ω—è–ª—Å—è –ø–æ—Ä–æ–≥ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ conf –º–æ–¥–µ–ª–∏

| –ü–æ—Ä–æ–≥ `conf` | TP  | FP  | FN  | Precision | Recall | F1-score |
|-------------:|----:|----:|----:|----------:|-------:|---------:|
| 0.05 | 499 | 713 | 287 | 0.412 | 0.635 | 0.499 |
| 0.10 | 495 | 430 | 291 | 0.535 | 0.630 | 0.579 |
| 0.15 | 492 | 253 | 294 | 0.660 | 0.626 | 0.643 |
| 0.20 | 488 | 153 | 298 | 0.761 | 0.621 | 0.684 |
| **0.30** | **472** | **83** | **314** | **0.851** | **0.601** | **0.704** ‚Üê –ª—É—á—à–∏–π –±–∞–ª–∞–Ω—Å |
| 0.45 | 406 | 33  | 380 | 0.925 | 0.517 | 0.663 |
| 0.50 | 391 | 25  | 395 | 0.940 | 0.498 | 0.651 |
| 0.55 | 368 | 19  | 418 | 0.951 | 0.468 | 0.628 |
| 0.60 | 323 | 15  | 463 | 0.956 | 0.411 | 0.575 |
| 0.70 | 264 | 11  | 522 | 0.960 | 0.336 | 0.498 |

# –í—ã–≤–æ–¥—ã –ø–æ –∫–∞—á–µ—Å—Ç–≤—É
- –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –≤–∏–¥–µ–æ: conf ‚âà 0.30
- –ú–æ–¥–µ–ª—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—ã—Å–æ–∫—É—é —Ç–æ—á–Ω–æ—Å—Ç—å (Precision ‚âà 0.85), —Ç–æ –µ—Å—Ç—å –ø–æ—á—Ç–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –ª–æ–∂–Ω—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è
- Recall ‚âà 0.60, —á—Ç–æ –æ—Ç—Ä–∞–∂–∞–µ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –¥–µ—Ç–µ–∫—Ü–∏–∏ –ª—é–¥–µ–π, —É –∫–æ—Ç–æ—Ä—ã—Ö –≤–∏–¥–Ω–∞ —Ç–æ–ª—å–∫–æ –≤–µ—Ä—Ö–Ω—è—è —á–∞—Å—Ç—å —Ç–µ–ª–∞ –∏–ª–∏ –≥–æ–ª–æ–≤–∞
- –û—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫ –æ—à–∏–±–æ–∫: –º–µ–ª–∫–∏–µ –ª—é–¥–∏ –≤ –ø–ª–æ—Ç–Ω–æ–π —Ç–æ–ª–ø–µ –∏ –¥–∞–ª—å–Ω–µ–º –ø–ª–∞–Ω–µ

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –Ω–∞ —Å—Ü–µ–Ω—ã —Å –æ–±–∏–ª—å–Ω—ã–º–∏ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è–º–∏ –∏ –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–Ω—ã–º–∏ –∏—Å–∫–∞–∂–µ–Ω–∏—è–º–∏ –º–æ–¥–µ–ª—å, –æ–±—É—á–µ–Ω–Ω–∞—è –Ω–∞ COCO-—Ç–µ–ª–∞—Ö, —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –æ–∂–∏–¥–∞–µ–º–æ: —É–≤–µ—Ä–µ–Ω–Ω–æ –¥–µ—Ç–µ–∫—Ç–∏—Ä—É–µ—Ç –≤–∏–¥–∏–º—ã–µ —Ç–µ–ª–∞, –Ω–æ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –æ–±—ä–µ–∫—Ç—ã, –≥–¥–µ –≤–∏–¥–Ω–∞ —Ç–æ–ª—å–∫–æ –≥–æ–ª–æ–≤–∞.
